{"version":3,"sources":["../../src/controllers/category.controller.js"],"names":["objectid","Types","ObjectId","categoryList","callback","Category","find","err","data","categoryDetail","catId","findById","addCategory","category","name","slugify","save","success","msg","updateCategory","findByIdAndUpdate","console","log","deleteCategory","findByIdAndRemove","text","toString","toLowerCase","replace","module","exports"],"mappings":";;AAAA;;;;AACA;;;;AAEA,IAAMA,WAAWC,gBAAMC,QAAvB;;AAEA,IAAMC,eAAe,SAAfA,YAAe,CAAUC,QAAV,EAAoB;AACrCC,uBAASC,IAAT,CAAc,EAAd,EAAkB,UAAUC,GAAV,EAAeC,IAAf,EAAqB;AACnC,YAAID,GAAJ,EAAS;AACLH,qBAASG,GAAT;AACH;AACD,eAAOH,SAASG,GAAT,EAAcC,IAAd,CAAP;AACH,KALD;AAMH,CAPD;;AASA,IAAMC,iBAAiB,SAAjBA,cAAiB,CAAUC,KAAV,EAAiBN,QAAjB,EAA2B;AAC9CC,uBAASM,QAAT,CAAkB,EAAE,OAAOX,SAASU,KAAT,CAAT,EAAlB,EAA8C,UAAUH,GAAV,EAAeC,IAAf,EAAqB;AAC/D,YAAID,GAAJ,EAAS;AACL,mBAAOH,SAASG,GAAT,CAAP;AACH;AACD,eAAOH,SAASG,GAAT,EAAcC,IAAd,CAAP;AACH,KALD;AAMH,CAPD;;AASA,IAAMI,cAAc,SAAdA,WAAc,CAAUJ,IAAV,EAAgBJ,QAAhB,EAA0B;AAC1C,QAAIS,WAAW,IAAIR,kBAAJ,CAAa;AACxB,oBAAYG,KAAKM,IADO;AAExB,oBAAYC,QAAQP,KAAKM,IAAb;AAFY,KAAb,CAAf;AAIAD,aAASG,IAAT,CAAc,eAAO;AACjB,YAAIT,GAAJ,EAAS;AACL,mBAAOH,SAASG,GAAT,CAAP;AACH;AACD,eAAOH,SAASG,GAAT,EAAc,EAAEU,SAAS,IAAX,EAAiBC,KAAK,gBAAtB,EAAd,CAAP;AACH,KALD;AAMH,CAXD;;AAaA,IAAMC,iBAAiB,SAAjBA,cAAiB,CAAUX,IAAV,EAAgBE,KAAhB,EAAuBN,QAAvB,EAAiC;AACpDC,uBAASe,iBAAT,CACI,EAAE,OAAOpB,SAASU,KAAT,CAAT,EADJ,EAEI,EAAE,YAAYF,KAAKM,IAAnB,EAFJ,EAGI,eAAO;AACHO,gBAAQC,GAAR,CAAYf,GAAZ;AACA,eAAOH,SAASG,GAAT,EAAc,EAAEU,SAAS,IAAX,EAAiBC,KAAK,kBAAtB,EAAd,CAAP;AACH,KANL;AAOH,CARD;;AAUA,IAAMK,iBAAiB,SAAjBA,cAAiB,CAAUb,KAAV,EAAiBN,QAAjB,EAA2B;AAC9CC,uBAASmB,iBAAT,CAA2B,EAAE,OAAOxB,SAASU,KAAT,CAAT,EAA3B,EAAuD,eAAO;AAC1D,eAAON,SAASG,GAAT,EAAc,EAAEU,SAAS,IAAX,EAAiBC,KAAK,kBAAtB,EAAd,CAAP;AACH,KAFD;AAGH,CAJD;;AAOA,SAASH,OAAT,CAAiBU,IAAjB,EAAuB;AACnB,WAAOA,KAAKC,QAAL,GAAgBC,WAAhB,GACFC,OADE,CACM,MADN,EACc,GADd,EAC0B;AAD1B,KAEFA,OAFE,CAEM,WAFN,EAEmB,EAFnB,EAEyB;AAFzB,KAGFA,OAHE,CAGM,QAHN,EAGgB,GAHhB,EAG0B;AAH1B,KAIFA,OAJE,CAIM,KAJN,EAIa,EAJb,EAI0B;AAJ1B,KAKFA,OALE,CAKM,KALN,EAKa,EALb,CAAP,CADmB,CAMc;AACpC;;AAGDC,OAAOC,OAAP,GAAiB;AACb3B,kBAAcA,YADD;AAEbM,oBAAgBA,cAFH;AAGbG,iBAAaA,WAHA;AAIbO,oBAAgBA,cAJH;AAKbI,oBAAgBA;AALH,CAAjB","file":"category.controller.js","sourcesContent":["import Category from '../models/category.model';\r\nimport { Types } from 'mongoose';\r\n\r\nconst objectid = Types.ObjectId;\r\n\r\nconst categoryList = function (callback) {\r\n    Category.find({}, function (err, data) {\r\n        if (err) {\r\n            callback(err);\r\n        }\r\n        return callback(err, data);\r\n    });\r\n};\r\n\r\nconst categoryDetail = function (catId, callback) {\r\n    Category.findById({ \"_id\": objectid(catId) }, function (err, data) {\r\n        if (err) {\r\n            return callback(err);\r\n        }\r\n        return callback(err, data);\r\n    });\r\n};\r\n\r\nconst addCategory = function (data, callback) {\r\n    let category = new Category({\r\n        \"cat_name\": data.name,\r\n        \"cat_slug\": slugify(data.name),\r\n    });\r\n    category.save(err => {\r\n        if (err) {\r\n            return callback(err);\r\n        }\r\n        return callback(err, { success: true, msg: 'Category added' });\r\n    });\r\n}\r\n\r\nconst updateCategory = function (data, catId, callback) {\r\n    Category.findByIdAndUpdate(\r\n        { \"_id\": objectid(catId) },\r\n        { 'cat_name': data.name },\r\n        err => {\r\n            console.log(err);\r\n            return callback(err, { success: true, msg: 'Category updated' })\r\n        });\r\n}\r\n\r\nconst deleteCategory = function (catId, callback) {\r\n    Category.findByIdAndRemove({ \"_id\": objectid(catId) }, err => {\r\n        return callback(err, { success: true, msg: 'Category deleted' })\r\n    });\r\n}\r\n\r\n\r\nfunction slugify(text) {\r\n    return text.toString().toLowerCase()\r\n        .replace(/\\s+/g, '-')        // Replace spaces with -\r\n        .replace(/[^\\w\\-]+/g, '')   // Remove all non-word chars\r\n        .replace(/\\-\\-+/g, '-')      // Replace multiple - with single -\r\n        .replace(/^-+/, '')          // Trim - from start of text\r\n        .replace(/-+$/, '');         // Trim - from end of text\r\n}\r\n\r\n\r\nmodule.exports = {\r\n    categoryList: categoryList,\r\n    categoryDetail: categoryDetail,\r\n    addCategory: addCategory,\r\n    updateCategory: updateCategory,\r\n    deleteCategory: deleteCategory,\r\n}"]}